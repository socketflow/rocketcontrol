# minimum but effective ruleset from rocketcontrol
# by socketflow

[General]
bypass-system = true
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, e.crashlytics.com, captive.apple.com
bypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.18.0.0/15,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32
dns-server = 114.114.114.114, 8.8.8.8, system, 112.124.47.27, 119.29.29.29, 223.5.5.5, 1.1.1.1, 9.9.9.9


[Rule]
# 101 - APPs to DIRECT
// Apple
USER-AGENT,com.apple.geod*,DIRECT
USER-AGENT,com.apple.Maps*,DIRECT
USER-AGENT,geod*,DIRECT
USER-AGENT,locationd*,DIRECT

# 102 - LOCALs to DIRECT
// This is useful for local area sharing, such as NAS drive, etc
DOMAIN-SUFFIX,local,DIRECT
// below are already in [General] section above, [skip-proxy] and [bypass-tun] section
IP-CIDR,192.168.0.0/16,DIRECT
IP-CIDR,10.0.0.0/8,DIRECT
IP-CIDR,172.16.0.0/12,DIRECT
IP-CIDR,127.0.0.0/8,DIRECT
IP-CIDR,100.64.0.0/10,DIRECT

# 201 - APPs to BLOCK
// need to figure out if iOS allows per app identification or how

# 202 - TARGETs to BLOCK
// Apple AD
DOMAIN-SUFFIX,adserver.unityads.unity3d.com,REJECT

// Crashly
crashlytics.com

// 10000
DOMAIN-SUFFIX,daohang.114so.cn,REJECT
DOMAIN-SUFFIX,www.114so.cn,REJECT

// 10086
DOMAIN-SUFFIX,hivedata.cc,REJECT
DOMAIN-SUFFIX,navi.gd.chinamobile.com,REJECT

// 2345
DOMAIN-SUFFIX,dl.2345.com,REJECT
DOMAIN-SUFFIX,download.2345.com,REJECT
DOMAIN-SUFFIX,jifendownload.2345.cn,REJECT
DOMAIN-SUFFIX,wan.2345.com,REJECT

// 360
DOMAIN-SUFFIX,3600.com,REJECT
DOMAIN-SUFFIX,ad.dev.360.cn,REJECT
DOMAIN-SUFFIX,ad.huajiao.com,REJECT
DOMAIN-SUFFIX,appjiagu.com,REJECT
DOMAIN-SUFFIX,cpull.360.cn,REJECT
DOMAIN-SUFFIX,dev.tg.wan.360.cn,REJECT
DOMAIN-SUFFIX,display.360totalsecurity.com,REJECT
DOMAIN-SUFFIX,down.360safe.com,REJECT
DOMAIN-SUFFIX,gamebox.360.cn,REJECT
DOMAIN-SUFFIX,hot.m.shouji.360tpcdn.com,REJECT
DOMAIN-SUFFIX,hs.qhupdate.com,REJECT
DOMAIN-SUFFIX,huid.ad.360.cn,REJECT
DOMAIN-SUFFIX,jiagu.360.cn,REJECT
DOMAIN-SUFFIX,kuaikan.netmon.360safe.com,REJECT
DOMAIN-SUFFIX,leak.360.cn,REJECT
DOMAIN-SUFFIX,mbrowser.news.haosou.com,REJECT
DOMAIN-SUFFIX,mbrowser.news.so.com,REJECT
DOMAIN-SUFFIX,mbs.hao.360.cn,REJECT
DOMAIN-SUFFIX,msoftdl.360.cn,REJECT
DOMAIN-SUFFIX,openbox.mobilem.360.cn,REJECT
DOMAIN-SUFFIX,ps.dev.360.cn,REJECT
DOMAIN-SUFFIX,pub.se.360.cn,REJECT
DOMAIN-SUFFIX,rd.wan.360.cn,REJECT
DOMAIN-SUFFIX,s.360.cn,REJECT
DOMAIN-SUFFIX,s.qhupdate.com,REJECT
DOMAIN-SUFFIX,s.union.360.cn,REJECT
DOMAIN-SUFFIX,sh.qihoo.com,REJECT
DOMAIN-SUFFIX,shouji.360.cn,REJECT
DOMAIN-SUFFIX,soft.data.weather.360.cn,REJECT
DOMAIN-SUFFIX,stat.360safe.com,REJECT
DOMAIN-SUFFIX,stat.m.360.cn,REJECT
DOMAIN-SUFFIX,stat.sd.360.cn,REJECT
DOMAIN-SUFFIX,static.ts.360.com,REJECT
DOMAIN-SUFFIX,tf.360.cn,REJECT
DOMAIN-SUFFIX,top.h.qhimg.com,REJECT
DOMAIN-SUFFIX,update.360safe.com,REJECT

// More AD domains
DOMAIN-KEYWORD,admarvel,REJECT-TINYGIF
DOMAIN-KEYWORD,admaster,REJECT-TINYGIF
DOMAIN-KEYWORD,adsage,REJECT-TINYGIF
DOMAIN-KEYWORD,adsmogo,REJECT-TINYGIF
DOMAIN-KEYWORD,adsrvmedia,REJECT-TINYGIF
DOMAIN-KEYWORD,adwords,REJECT-TINYGIF
DOMAIN-KEYWORD,adservice,REJECT-TINYGIF
DOMAIN-KEYWORD,domob,REJECT-TINYGIF
DOMAIN-KEYWORD,duomeng,REJECT-TINYGIF
DOMAIN-KEYWORD,dwtrack,REJECT-TINYGIF
DOMAIN-KEYWORD,guanggao,REJECT-TINYGIF
DOMAIN-KEYWORD,lianmeng,REJECT-TINYGIF
DOMAIN-SUFFIX,mmstat.com,REJECT
DOMAIN-KEYWORD,omgmta,REJECT-TINYGIF
DOMAIN-KEYWORD,openx,REJECT-TINYGIF
DOMAIN-KEYWORD,partnerad,REJECT-TINYGIF
DOMAIN-KEYWORD,pingfore,REJECT-TINYGIF
DOMAIN-KEYWORD,supersonicads,REJECT-TINYGIF
DOMAIN-KEYWORD,tracking,REJECT-TINYGIF
DOMAIN-KEYWORD,uedas,REJECT-TINYGIF
DOMAIN-KEYWORD,umeng,REJECT-TINYGIF
DOMAIN-KEYWORD,usage,REJECT-TINYGIF
DOMAIN-KEYWORD,wlmonitor,REJECT-TINYGIF
DOMAIN-KEYWORD,zjtoolbar,REJECT-TINYGIF

# 301 - APPs to DIRECT
// Tencent
USER-AGENT,微信*,DIRECT
USER-AGENT,WeChat*,DIRECT
USER-AGENT,MicroMessenger*,DIRECT
USER-AGENT,QQ*,DIRECT
USER-AGENT,TIM*,DIRECT

// Alibaba
USER-AGENT,AliApp*,DIRECT
USER-AGENT,钉钉*,DIRECT
USER-AGENT,DingTalk*,DIRECT
USER-AGENT,手机淘宝*,DIRECT
USER-AGENT,支付宝*,DIRECT
USER-AGENT,Alipay*,DIRECT
// Bilibili
USER-AGENT,bili-universal*,DIRECT
USER-AGENT,bili*,DIRECT
// Didi Taxi
USER-AGENT,OneTravel*,DIRECT


# 302 - TARGETs to DIRECT
// general rule for all china IP pool
GEOIP,CN,DIRECT
DOMAIN-SUFFIX,cn,DIRECT
DOMAIN-SUFFIX,gov.cn,DIRECT
DOMAIN-SUFFIX,edu.cn,DIRECT

// Alibaba related services
DOMAIN-SUFFIX,taobao.com,DIRECT
DOMAIN-KEYWORD,taobao,DIRECT
DOMAIN-SUFFIX,tmall.com,DIRECT
DOMAIN-KEYWORD,tmall,DIRECT
DOMAIN-SUFFIX,alibaba.com,DIRECT
DOMAIN-KEYWORD,alibaba,DIREC
DOMAIN-SUFFIX,alibaba-inc.com,DIRECT
DOMAIN-SUFFIX,dingtalk.com,DIRECT
DOMAIN-KEYWORD,dingtalk,DIRECT
DOMAIN-SUFFIX,alipay.com,DIRECT
DOMAIN-KEYWORD,alipay,DIRECT

// Tencent related services
DOMAIN-SUFFIX,qq.com,DIRECT
DOMAIN-SUFFIX,tencent.com,DIRECT
DOMAIN-KEYWORD,tencent,DIRECT

# 303 - CDNs to DIRECT
DOMAIN-SUFFIX,csdn.net,DIRECT
DOMAIN-SUFFIX,staticfile.org,DIRECT
DOMAIN-SUFFIX,cdnjs.cn,DIRECT
DOMAIN-SUFFIX,clouddn.com,DIRECT
DOMAIN-SUFFIX,qiniu.com,DIRECT
DOMAIN-SUFFIX,alicdn.com,DIRECT
DOMAIN-SUFFIX,aliyuncs.com,DIRECT
DOMAIN-SUFFIX,qihucdn.com,DIRECT
DOMAIN-SUFFIX,upai.com,DIRECT
DOMAIN-SUFFIX,upyun.com,DIRECT
DOMAIN-SUFFIX,upaiyun.com,DIRECT
DOMAIN-SUFFIX,mmstat.com,DIRECT
DOMAIN-SUFFIX,amap.com,DIRECT

# 401 - APPs to PROXY
// same as 201
USER-AGENT,com.google.ios.youtube*,Proxy
USER-AGENT,YouTube*,Proxy
USER-AGENT,*Spotify*,Proxy
USER-AGENT,Pinterest*,Proxy

# 402 - TARGETs to PROXY
// Remote DNS
DOMAIN-KEYWORD,amazon,Proxy,force-remote-dns
DOMAIN-KEYWORD,google,Proxy,force-remote-dns
DOMAIN-KEYWORD,gmail,Proxy,force-remote-dns
DOMAIN-KEYWORD,youtube,Proxy,force-remote-dns
DOMAIN-KEYWORD,facebook,Proxy,force-remote-dns
DOMAIN-SUFFIX,fb.me,Proxy,force-remote-dns
DOMAIN-SUFFIX,fbcdn.net,Proxy,force-remote-dns
DOMAIN-KEYWORD,twitter,Proxy,force-remote-dns
DOMAIN-KEYWORD,instagram,Proxy,force-remote-dns
DOMAIN-KEYWORD,dropbox,Proxy,force-remote-dns
DOMAIN-SUFFIX,twimg.com,Proxy,force-remote-dns
DOMAIN-KEYWORD,blogspot,Proxy,force-remote-dns
DOMAIN-SUFFIX,youtu.be,Proxy,force-remote-dns
DOMAIN-KEYWORD,whatsapp,Proxy,force-remote-dns
DOMAIN-KEYWORD,pinterest,Proxy,force-remote-dns
DOMAIN-KEYWORD,telegram,Proxy,force-remote-dns

// Google and YouTube
DOMAIN-SUFFIX,ytimg.com,Proxy
DOMAIN-SUFFIX,youtube-nocookie.com,Proxy
DOMAIN-KEYWORD,youtube,Proxy
DOMAIN-SUFFIX,youtube.com,Proxy
DOMAIN-SUFFIX,yimg.com,Proxy
DOMAIN-SUFFIX,googlevideo.com,Proxy
DOMAIN-KEYWORD,google,Proxy
DOMAIN-SUFFIX,dl-ssl.l.google.com,Proxy
DOMAIN-SUFFIX,storage.cloud.google.com,Proxy
DOMAIN-SUFFIX,dl.l.google.com,Proxy
DOMAIN-SUFFIX,dl.google.com,Proxy
DOMAIN-SUFFIX,google.com,Proxy
DOMAIN-SUFFIX,goo.gl,Proxy
DOMAIN-SUFFIX,ggpht.com,Proxy
DOMAIN-KEYWORD,ggpht,Proxy

// Github
DOMAIN-SUFFIX,githubusercontent.com,Proxy
DOMAIN-SUFFIX,github.io,Proxy
DOMAIN-SUFFIX,github.com,Proxy
DOMAIN-KEYWORD,github,Proxy

// Facebook
DOMAIN-SUFFIX,facebook.net,Proxy
DOMAIN-SUFFIX,facebook.com,Proxy
DOMAIN-KEYWORD,facebook,Proxy

// Twitter
DOMAIN-SUFFIX,twitter.com,Proxy
DOMAIN-SUFFIX,twitter.net,Proxy
DOMAIN-KEYWORD,twitter,Proxy

// Wordpress
DOMAIN-SUFFIX,wp.com,Proxy
DOMAIN-SUFFIX,wordpress.com,Proxy
DOMAIN-SUFFIX,wordpress.org,Proxy

// Wikipedia
DOMAIN-SUFFIX,wikipedia.org,Proxy
DOMAIN-KEYWORD,wikipedia,Proxy
DOMAIN-SUFFIX,wiktionary.com,Proxy
DOMAIN-SUFFIX,wikimedia.org,Proxy

// Microsoft
DOMAIN-SUFFIX,microsoft.com,Proxy
DOMAIN-KEYWORD,microsoft,Proxy
DOMAIN-SUFFIX,outlook.com,Proxy
DOMAIN-KEYWORD,outlook,Proxy
DOMAIN-SUFFIX,live.com,Proxy

// Misc.
DOMAIN-SUFFIX,64clouds.com,Proxy
DOMAIN-SUFFIX,vultr.com,Proxy
DOMAIN-SUFFIX,mixpanel.com,Proxy
DOMAIN-SUFFIX,linode.com,Proxy
DOMAIN-SUFFIX,it7.net,Proxy
DOMAIN-SUFFIX,hostigation.com,Proxy
DOMAIN-SUFFIX,bandwagonhost.com,Proxy
DOMAIN-SUFFIX,anynode.net,Proxy
DOMAIN-SUFFIX,tumblr.com,Proxy
DOMAIN-SUFFIX,dropboxusercontent.com,Proxy
DOMAIN-SUFFIX,dropbox.com,Proxy
DOMAIN-SUFFIX,duckduckgo.com,Proxy
DOMAIN-SUFFIX,gitlab.com,Proxy
DOMAIN-SUFFIX,python.org,Proxy
DOMAIN-SUFFIX,rubygems.org,Proxy
DOMAIN-SUFFIX,workflowy.com,Proxy
DOMAIN-SUFFIX,abpchina.org,Proxy
DOMAIN-SUFFIX,adjust.com,Proxy
DOMAIN-SUFFIX,tsdm.me,Proxy
DOMAIN-SUFFIX,tampermonkey.net,Proxy
DOMAIN-SUFFIX,spotify.com,Proxy
DOMAIN-SUFFIX,sleazyfork.org,Proxy
DOMAIN-SUFFIX,scorecardresearch.com,Proxy
DOMAIN-SUFFIX,scdn.co,Proxy
DOMAIN-SUFFIX,gstatic.com,Proxy
DOMAIN-SUFFIX,greasyfork.org,Proxy
DOMAIN-SUFFIX,gravatar.com,Proxy
DOMAIN-SUFFIX,pinimg.com,Proxy
DOMAIN-SUFFIX,pinterest.com,Proxy
DOMAIN-SUFFIX,telegra.ph,Proxy
DOMAIN-SUFFIX,telegram.org,Proxy

# 403 - CDNs to PROXY
// Akamai
DOMAIN-SUFFIX,akamai.com,Proxy
DOMAIN-SUFFIX,akamaized.net,Proxy
DOMAIN-SUFFIX,akamaitech.net,Proxy
DOMAIN-SUFFIX,akamaistream.net,Proxy
DOMAIN-SUFFIX,akamaihd.net,Proxy
DOMAIN-SUFFIX,akamaiedge.net,Proxy
DOMAIN-SUFFIX,akamai.net,Proxy
DOMAIN-SUFFIX,akadns.com,Proxy
DOMAIN-SUFFIX,akadns.net,Proxy
DOMAIN-SUFFIX,akam.net,Proxy
DOMAIN-KEYWORD,akamai,Proxy

// AWS
DOMAIN-SUFFIX,amazonaws.com,Proxy
DOMAIN-KEYWORD,amazonaws,Proxy

// Misc.
DOMAIN-SUFFIX,yahoodns.net,Proxy
DOMAIN-SUFFIX,vimeocdn.com,Proxy
DOMAIN-SUFFIX,vimeo.com,Proxy
DOMAIN-SUFFIX,typography.com,Proxy
DOMAIN-SUFFIX,typekit.net,Proxy
DOMAIN-SUFFIX,typekit.com,Proxy
DOMAIN-SUFFIX,jsdelivr.net,Proxy
DOMAIN-SUFFIX,incapsula.com,Proxy
DOMAIN-SUFFIX,incapsula.net,Proxy
DOMAIN-SUFFIX,edgesuite.net,Proxy
DOMAIN-SUFFIX,edgekey.net,Proxy
DOMAIN-SUFFIX,edgecastcdn.net,Proxy
DOMAIN-SUFFIX,edgecastcdn.com,Proxy
DOMAIN-SUFFIX,coralcdn.org,Proxy
DOMAIN-SUFFIX,cloudfront.net,Proxy
DOMAIN-SUFFIX,cloudflare.net,Proxy
DOMAIN-SUFFIX,cdn-apple.com,Proxy
DOMAIN-SUFFIX,caskroom.io,Proxy
DOMAIN-SUFFIX,cachefly.com,Proxy
DOMAIN-SUFFIX,cachefly.net,Proxy
DOMAIN-SUFFIX,brew.sh,Proxy
DOMAIN-SUFFIX,bootstrapcdn.com,Proxy
DOMAIN-SUFFIX,bootstrapcdn.net,Proxy
DOMAIN-SUFFIX,bintray.com,Proxy

# 5 - FINAL
FINAL,Proxy


[URL Rewrite]
# Google_Service_HTTPS_Jump
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302



# --------------------------------------
# References
// https://chua.pro/configure-rules-on-surge/
// https://github.com/h2y/Shadowrocket-ADBlock-Rules
// https://github.com/Hackl0us/SS-Rule-Snippet
// https://github.com/lhie1/Rules/tree/master/Shadowrocket
